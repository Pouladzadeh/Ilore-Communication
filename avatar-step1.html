<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Choose Your Avatar ‚Äì ILore Communication App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styless.css">
</head>
<body>
  <!-- ============================================ -->
  <!-- HEADER SECTION - Navigation and Branding    -->
  <!-- ============================================ -->
  <header class="header" id="header">
    <div class="nav-container">
      <a href="index.html" class="logo">
        <img src="img/Logo.svg" alt="Ilore logo" style="height:32px; width: 122px; vertical-align:middle;">
      </a>

      <nav class="nav-menu" id="navMenu">
              <a href="index.html">Home</a>
              <a href="product.html">Product</a>
              <a href="Contact.html">Contact</a>
          </nav>
      
      <div class="nav-actions">
        <button class="mobile-menu-toggle" id="mobileMenuToggle"></button>
      </div>
    </div>
  </header>
  <!-- END HEADER SECTION -->

  <!-- ============================================ -->
  <!-- SOUND CONTROL SECTION - Toggle and status    -->
  <!-- ============================================ -->
<!--  <div class="sound-control">
    <span>üîä Sound:</span>
    <div class="sound-toggle" onclick="toggleSound()" tabindex="0" role="button" aria-label="Toggle sound on or off"></div>
    <span id="sound-status">Off</span>
  </div>-->

  <!-- ============================================ -->
  <!-- AVATAR CONTAINER / MAIN CONTENTS - Progress, options, help -->
  <!-- ============================================ -->
  <div class="avatar-container">
    <div class="progress-section">
      <div class="progress-text">Step 1 of 3: Choose Your Picture</div>
      <div class="progress-track">
        <div class="progress-fill"></div>
      </div>
    </div>

    <div class="avatar-content">
      <h1 class="avatar-title">Create Avatar</h1>
      <p class="avatar-subtitle">Pick what feels right for you, snap a photo or choose a fun character.</p>

      <div class="help-section">
        <div class="help-title">üìñ How to Choose:</div>
        <div class="help-text">
        Click on either Take Your Photo or Choose a Character to make your pick. Once you've chosen, the box will highlight so you know it's selected.
        </div>
      </div>

      <!-- ============================================ -->
      <!-- SELECTION OPTIONS - Camera & Character choices -->
      <!-- ============================================ -->
      <div class="selection-options-grid">
        <!-- ============================================ -->
        <!-- CAMERA OPTION - Live camera, capture, preview -->
        <!-- ============================================ -->
        <div class="selection-option-card" id="camera-card" tabindex="0" onclick="selectCameraOption()" onkeydown="handleCardKeydown(event, 'camera')">
          <div class="option-header">
            <div class="option-number">1</div>
            <h2 class="option-title">Take Your Photo</h2>
            <p class="option-description">Turn on your camera and snap a quick picture of yourself.</p>
          </div>
          
          <div class="camera-section">
            <div class="camera-preview" id="camera-preview">
              <div class="camera-icon">üì∑</div>
              <div class="camera-text">Click to start camera</div>
            </div>
            <button class="btn-camera" id="camera-btn" onclick="toggleCamera(event)">
              <span id="camera-btn-text">Start Camera</span>
            </button>
          </div>
        </div>

        <!-- ============================================ -->
        <!-- CHARACTER OPTION - Predefined avatars, selection grid -->
        <!-- ============================================ -->
        <div class="selection-option-card" id="character-card" tabindex="0" onclick="selectCharacterOption()" onkeydown="handleCardKeydown(event, 'character')">
          <div class="option-header">
            <div class="option-number">2</div>
            <h2 class="option-title">Choose a Character</h2>
            <p class="option-description">Pick from our friendly character collection</p>
          </div>
          
          <div class="character-selection-grid" role="radiogroup" aria-label="Character selection" onclick="event.stopPropagation()">
            <div class="character-option" tabindex="0" role="radio" aria-checked="false" onclick="selectCharacter(this, 'girl1')" onkeydown="handleCharacterKeydown(event, this)">
              <div class="character-image">
                <img src="img/friendlygirl.svg" alt="Friendly Girl">
              </div>
              <div class="character-label">Friendly Girl</div>
            </div>
            
            <div class="character-option" tabindex="0" role="radio" aria-checked="false" onclick="selectCharacter(this, 'boy1')" onkeydown="handleCharacterKeydown(event, this)">
              <div class="character-image">
                <img src="img/happyboy.svg" alt="Happy Boy">
              </div>
              <div class="character-label">Happy Boy</div>
            </div>
            
            <div class="character-option" tabindex="0" role="radio" aria-checked="false" onclick="selectCharacter(this, 'boy2')" onkeydown="handleCharacterKeydown(event, this)">
              <div class="character-image">
                <img src="img/coolboy.svg" alt="Cool Boy">
              </div>
              <div class="character-label">Cool Boy</div>
            </div>
            
            <div class="character-option" tabindex="0" role="radio" aria-checked="false" onclick="selectCharacter(this, 'girl2')" onkeydown="handleCharacterKeydown(event, this)">
              <div class="character-image">
                <img src="img/smartgirl.svg" alt="Smart Girl">
              </div>
              <div class="character-label">Smart Girl</div>
            </div>
            
            <div class="character-option" tabindex="0" role="radio" aria-checked="false" onclick="selectCharacter(this, 'girl3')" onkeydown="handleCharacterKeydown(event, this)">
              <div class="character-image">
                <img src="img/creativegirl.svg" alt="Creative Girl">
              </div>
              <div class="character-label">Creative Girl</div>
            </div>
            
            <div class="character-option" tabindex="0" role="radio" aria-checked="false" onclick="selectCharacter(this, 'boy3')" onkeydown="handleCharacterKeydown(event, this)">
              <div class="character-image">
                <img src="img/kindboy.svg" alt="Kind Boy">
              </div>
              <div class="character-label">Kind Boy</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ============================================ -->
      <!-- ACTION BUTTONS - Navigation controls for this step -->
      <!-- ============================================ -->
      <div class="action-buttons">
        <button class="btn btn-outline-primary" onclick="goBack()">‚Üê Go Back</button>
       <!--   <button class="btn btn-secondary" onclick="skipStep()">Skip This Step</button> -->
        <button class="btn btn-primary" id="continue-btn" disabled onclick="continueNext()">Continue ‚Üí</button>
        
        
      </div>
    </div>
  </div>

  <!-- ============================================ -->
  <!-- FOOTER SECTION                               -->
  <!-- ============================================ -->
  <footer class="footer">
    <div class="footer-container">
        <!-- Desktop: Logo with social icons in footer-brand -->
        <div class="footer-brand">
            <img src="img/Logo-light.svg" alt="Ilore" class="footer-logo">
            <div class="social-icons">
              <div class="social-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                  <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.024-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.163-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/>
                </svg>
              </div>
              <div class="social-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                  <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                </svg>
              </div>
              <div class="social-icon">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                  <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                </svg>
              </div>
            </div>
          </div>
          
          <!-- Desktop: Company and Support sections -->
          <div class="footer-section">
            <h3>Company</h3>
            <ul class="footer-links">
              <li><a href="#">About us</a></li>
              <li><a href="#">Blog</a></li>
              <li><a href="#">Contact us</a></li>
              <li><a href="#">Pricing</a></li>
              <li><a href="#">Testimonials</a></li>
            </ul>
          </div>
          
          <div class="footer-section">
            <h3>Support</h3>
            <ul class="footer-links">
              <li><a href="#">Help center</a></li>
              <li><a href="#">Terms of service</a></li>
              <li><a href="#">Legal</a></li>
              <li><a href="#">Privacy policy</a></li>
              <li><a href="#">Status</a></li>
            </ul>
          </div>
          
          <!-- All screens: Newsletter -->
          <div class="footer-section newsletter-section">
            <h3>Stay up to date</h3>
            <form class="newsletter">
              <input type="email" class="newsletter-input" placeholder="Enter your email">
              <button type="submit" class="newsletter-btn">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
                  <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
              </button>
            </form>
          </div>
        
        <!-- Mobile/Tablet: Separate social icons -->
        <div class="social-icons">
          <div class="social-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
              <path d="M12.017 0C5.396 0 .029 5.367.029 11.987c0 5.079 3.158 9.417 7.618 11.024-.105-.949-.199-2.403.041-3.439.219-.937 1.406-5.957 1.406-5.957s-.359-.72-.359-1.781c0-1.663.967-2.911 2.168-2.911 1.024 0 1.518.769 1.518 1.688 0 1.029-.653 2.567-.992 3.992-.285 1.193.6 2.165 1.775 2.165 2.128 0 3.768-2.245 3.768-5.487 0-2.861-2.063-4.869-5.008-4.869-3.41 0-5.409 2.562-5.409 5.199 0 1.033.394 2.143.889 2.741.099.12.112.225.085.345-.09.375-.293 1.199-.334 1.363-.053.225-.172.271-.402.163-1.495-.69-2.433-2.878-2.433-4.646 0-3.776 2.748-7.252 7.92-7.252 4.158 0 7.392 2.967 7.392 6.923 0 4.135-2.607 7.462-6.233 7.462-1.214 0-2.357-.629-2.75-1.378l-.748 2.853c-.271 1.043-1.002 2.35-1.492 3.146C9.57 23.812 10.763 24.009 12.017 24.009c6.624 0 11.99-5.367 11.99-11.988C24.007 5.367 18.641.001.012.001z"/>
            </svg>
          </div>
          <div class="social-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
              <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
            </svg>
          </div>
          <div class="social-icon">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="white">
              <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
            </svg>
          </div>
        </div>
        
        <!-- Mobile/Tablet: Combined sections container -->
        <div class="footer-sections-container">
            <div class="footer-section">
              <h3>Company</h3>
              <ul class="footer-links">
                <li><a href="#">About us</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Contact us</a></li>
                <li><a href="#">Pricing</a></li>
                <li><a href="#">Testimonials</a></li>
              </ul>
            </div>
            
            <div class="footer-section">
              <h3>Support</h3>
              <ul class="footer-links">
                <li><a href="#">Help center</a></li>
                <li><a href="#">Terms of service</a></li>
                <li><a href="#">Legal</a></li>
                <li><a href="#">Privacy policy</a></li>
                <li><a href="#">Status</a></li>
              </ul>
            </div>
        </div>
    </div>
    
    <!-- ============================================ -->
    <!-- FOOTER BOTTOM - Copyright and legal links -->
    <!-- ============================================ -->
    <div class="footer-bottom">
      <p class="footer-copyright">
        @2025 Ilore Inc. All rights reserved. 
        <a href="/privacy">Privacy Policy</a> | 
        <a href="/terms">Terms of Services</a>
      </p> 
    </div>
  </footer>
  <!-- END FOOTER SECTION -->

  <!-- ============================================ -->
  <!-- SCRIPTS - Inline JS for interactions and accessibility -->
  <!-- ============================================ -->
  <script>
    let selectedCharacter = null;
    let soundEnabled = false;
    let cameraActive = false;
    let videoStream = null;
    let selectedOption = null;

   // function toggleSound() {
    //  soundEnabled = !soundEnabled;
    //  const toggle = document.querySelector('.sound-toggle');
    //  const status = document.getElementById('sound-status');
      
    //  if (soundEnabled) {
    //    toggle.classList.add('on');
    //   status.textContent = 'On';
   //   } else {
     //   toggle.classList.remove('on');
    //    status.textContent = 'Off';
   //   }
   // }

    function selectCameraOption() {
      clearAllSelections();
      document.getElementById('camera-card').classList.add('selected');
      selectedOption = 'camera';
      updateContinueButton();
      announceToScreenReader('Camera option selected');
    }

    function selectCharacterOption() {
      clearAllSelections();
      document.getElementById('character-card').classList.add('selected');
      selectedOption = 'character';
      updateContinueButton();
      announceToScreenReader('Character option selected');
    }

    function clearAllSelections() {
      document.getElementById('camera-card').classList.remove('selected');
      document.getElementById('character-card').classList.remove('selected');
      clearCharacterSelection();
      if (cameraActive) {
        stopCamera();
      }
      selectedOption = null;
    }

    function clearCharacterSelection() {
      document.querySelectorAll('.character-option').forEach(character => {
        character.classList.remove('selected');
        character.setAttribute('aria-checked', 'false');
      });
      selectedCharacter = null;
    }

    function updateContinueButton() {
      const continueBtn = document.getElementById('continue-btn');
      const hasSelection = selectedOption === 'camera' || (selectedOption === 'character' && selectedCharacter);
      continueBtn.disabled = !hasSelection;
    }

    function handleCardKeydown(event, optionType) {
      if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        if (optionType === 'camera') {
          selectCameraOption();
        } else {
          selectCharacterOption();
        }
      }
    }

    function handleCharacterKeydown(event, element) {
      if (event.key === 'Enter' || event.key === ' ') {
        event.preventDefault();
        const characterId = element.querySelector('.character-label').textContent;
        selectCharacter(element, characterId);
      }
    }

    function toggleCamera(event) {
      event.stopPropagation();
      
      if (!selectedOption) {
        selectCameraOption();
      }

      const preview = document.getElementById('camera-preview');
      const btn = document.getElementById('camera-btn');
      const btnText = document.getElementById('camera-btn-text');

      if (!cameraActive) {
        startCamera();
      } else if (videoStream && btnText.textContent === 'Take Photo') {
        capturePhoto();
      } else {
        stopCamera();
      }
    }

    async function startCamera() {
      try {
        const preview = document.getElementById('camera-preview');
        const btn = document.getElementById('camera-btn');
        const btnText = document.getElementById('camera-btn-text');

        videoStream = await navigator.mediaDevices.getUserMedia({ 
          video: { 
            width: { ideal: 640 },
            height: { ideal: 480 }
          } 
        });

        const video = document.createElement('video');
        video.className = 'camera-video';
        video.srcObject = videoStream;
        video.autoplay = true;
        video.muted = true;

        preview.innerHTML = '';
        preview.appendChild(video);
        preview.classList.add('active');

        btnText.textContent = 'Take Photo';
        btn.classList.add('capture');
        cameraActive = true;

        updateContinueButton();
        announceToScreenReader('Camera started. Click Take Photo when ready.');

      } catch (error) {
        console.error('Camera access denied or unavailable:', error);
        announceToScreenReader('Camera not available. Please choose a character instead.');
        
        const preview = document.getElementById('camera-preview');
        preview.innerHTML = `
          <div class="camera-icon">‚ùå</div>
          <div class="camera-text">Camera not available<br>Please choose a character</div>
        `;
      }
    }

    function capturePhoto() {
      const video = document.querySelector('.camera-video');
      const preview = document.getElementById('camera-preview');
      const btn = document.getElementById('camera-btn');
      const btnText = document.getElementById('camera-btn-text');

      if (video) {
        const canvas = document.createElement('canvas');
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(video, 0, 0);

        const img = document.createElement('img');
        img.src = canvas.toDataURL('image/jpeg');
        img.className = 'camera-photo';

        preview.innerHTML = '';
        preview.appendChild(img);

        btnText.textContent = 'Retake Photo';
        btn.classList.remove('capture');

        if (videoStream) {
          videoStream.getTracks().forEach(track => track.stop());
        }
        cameraActive = false;

        announceToScreenReader('Photo captured successfully.');
      }
    }

    function stopCamera() {
      const preview = document.getElementById('camera-preview');
      const btn = document.getElementById('camera-btn');
      const btnText = document.getElementById('camera-btn-text');

      if (videoStream) {
        videoStream.getTracks().forEach(track => track.stop());
        videoStream = null;
      }

      preview.innerHTML = `
        <div class="camera-icon">üì∑</div>
        <div class="camera-text">Click to start camera</div>
      `;
      preview.classList.remove('active');

      btnText.textContent = 'Start Camera';
      btn.classList.remove('capture');
      cameraActive = false;

      announceToScreenReader('Camera stopped.');
    }

    function selectCharacter(element, characterId) {
      event.stopPropagation();
      
      if (selectedOption !== 'character') {
        selectCharacterOption();
      }

      clearCharacterSelection();

      element.classList.add('selected');
      element.setAttribute('aria-checked', 'true');
      selectedCharacter = characterId;

      updateContinueButton();

      if (soundEnabled) {
        // Play selection sound
      }

      const label = element.querySelector('.character-label').textContent;
      announceToScreenReader(`Selected ${label}`);
    }

    function announceToScreenReader(message) {
      const announcement = document.createElement('div');
      announcement.setAttribute('role', 'status');
      announcement.setAttribute('aria-live', 'polite');
      announcement.style.position = 'absolute';
      announcement.style.left = '-10000px';
      announcement.textContent = message;
      document.body.appendChild(announcement);
      setTimeout(() => announcement.remove(), 1000);
    }

    function goBack() {
      window.history.back();
    }

    function skipStep() {
      window.location.href = 'next-step.html';
    }

    function continueNext() {
      if (selectedOption && (selectedOption === 'camera' || selectedCharacter)) {
        // Save selection and continue
        localStorage.setItem('avatarSelection', JSON.stringify({
          type: selectedOption,
          character: selectedCharacter
        }));
        window.location.href = 'avatar-step2.html';
      }
    }

    // Mobile menu toggle
    document.getElementById('mobileMenuToggle').addEventListener('click', function() {
      document.getElementById('navMenu').classList.toggle('active');
      this.classList.toggle('active');
    });
  </script>
</body>
</html>